/* Global theme */
:root {
  --brand: #22c55e;
  --brand-dark: #16a34a;
  --ink: #101828;
  --muted: #475467;
  --bg: #0b1220;
  --card: #0f172a;
  --ring: rgba(34, 197, 94, 0.25);
  --radius: 14px;
}

/* Explicit theme overrides via data-theme attribute */
[data-theme="light"] {
  --bg: #f6f7fb;
  --card: #ffffff;
  --ink: #0f172a;
  --muted: #475467;
}

[data-theme="dark"] {
  --bg: #0b1220;
  --card: #0f172a;
  --ink: #e2e8f0;
  --muted: #94a3b8;
}

/* Fallback to system preference when no explicit theme */
@media (prefers-color-scheme: light) {
  :root:not([data-theme]) {
    --bg: #f6f7fb;
    --card: #ffffff;
    --ink: #0f172a;
    --muted: #475467;
  }
}

html, body {
  height: 100%;
}

body {
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
  color: var(--ink);
  background: radial-gradient(1000px 500px at 90% -10%, rgba(34, 197, 94, 0.12), transparent 60%),
              radial-gradient(800px 400px at 0% 0%, rgba(59, 130, 246, 0.10), transparent 55%),
              var(--bg);
}

/* Navbar */
.navbar.glass {
  background: rgba(15, 23, 42, 0.6) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(148,163,184,0.18);
}

[data-theme="light"] .navbar.glass,
:root:not([data-theme])[data-prefers-light] .navbar.glass {
  background: rgba(255, 255, 255, 0.75) !important;
  border-bottom: 1px solid rgba(148,163,184,0.18);
}

.navbar .navbar-brand { font-weight: 700; letter-spacing: 0.2px; }

/* Cards */
.card {
  background: var(--card);
  border: 1px solid rgba(148, 163, 184, 0.15) !important;
  border-radius: var(--radius) !important;
  box-shadow: 0 8px 24px rgba(16, 24, 40, 0.08);
}
.card-header {
  border-top-left-radius: var(--radius) !important;
  border-top-right-radius: var(--radius) !important;
}

/* Buttons */
.btn-primary {
  background: linear-gradient(180deg, var(--brand), var(--brand-dark));
  border: none;
  box-shadow: 0 6px 16px rgba(34, 197, 94, 0.35);
}
.btn-primary:focus, .btn-primary:hover { filter: saturate(1.05) brightness(1.02); }
.btn-success { box-shadow: 0 6px 16px rgba(34, 197, 94, 0.30); }

/* Smooth UI transitions */
.card, .list-group-item, .btn, .navbar.glass { transition: background 180ms ease, border-color 180ms ease, box-shadow 180ms ease, transform 160ms ease; }
.icon-btn { transition: color 160ms ease, background-color 160ms ease, border-color 160ms ease, transform 120ms ease; }
.icon-btn:active { transform: scale(0.96); }

/* Hover states */
.team-card:hover { transform: translateY(-2px); box-shadow: 0 10px 24px rgba(16,24,40,0.16); border-color: rgba(20,184,166,0.5) !important; }
.list-group-item:hover { background: rgba(148,163,184,0.12); border-left-color: var(--brand); }

/* HTMX animations */
.htmx-added { animation: fadeSlideIn 200ms ease-out; }
.htmx-swapping { opacity: 0 !important; transform: translateY(-4px); }
@keyframes fadeSlideIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: none; }
}

/* Toast */
.app-toast {
  position: fixed; left: 50%; bottom: 18px; transform: translateX(-50%);
  background: rgba(15, 23, 42, 0.92); color: #e2e8f0;
  border: 1px solid rgba(148,163,184,0.25); border-radius: 12px;
  padding: 10px 14px; font-size: 14px; box-shadow: 0 8px 24px rgba(0,0,0,0.3);
  opacity: 0; pointer-events: none; transition: opacity .2s ease, transform .2s ease;
  z-index: 2000; min-width: 180px; text-align: center;
}
[data-theme="light"] .app-toast { background: rgba(255,255,255,0.95); color: #0f172a; }
.app-toast.show { opacity: 1; transform: translateX(-50%) translateY(-2px); }

/* Forms */
.form-control, .form-select {
  border-radius: 12px;
  border: 1px solid rgba(148, 163, 184, 0.35);
  background: var(--card);
  color: var(--ink);
}
.form-control:focus, .form-select:focus {
  border-color: var(--brand);
  box-shadow: 0 0 0 4px var(--ring);
}
/* Ensure labels and display text respect theme */
.form-label, label { color: var(--ink) !important; }
.display-1, .display-2, .display-3, .display-4, .display-5, .display-6 { color: var(--ink); }

/* Scoreboard readability */
.scoreboard .team-name { color: var(--ink) !important; }

/* Elements rendered only for OOB swaps */
.oob-only { display: none !important; }
/* Placeholder color */
.form-control::placeholder { color: var(--muted); opacity: 1; }
/* Fix bootstrap .bg-light/text-dark combos under dark theme */
.badge.bg-light { background: rgba(148,163,184,0.18) !important; color: var(--ink) !important; }
[data-theme="dark"] .badge.text-dark { color: var(--ink) !important; }

/* Scoreline */
#scoreline {
  display: inline-block;
  font-weight: 800;
  padding: 6px 14px;
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(34,197,94,0.14), rgba(34,197,94,0.08));
  border: 1px solid rgba(34,197,94,0.35);
}

/* Timeline */
.list-group-item { background: var(--card); color: var(--ink); border: 1px solid rgba(148, 163, 184, 0.2); border-left: 3px solid transparent; }
.list-group-item .badge.bg-success { background: #10b981 !important; }
.list-group-item .badge.bg-warning { background: #f59e0b !important; }
.list-group-item .badge.bg-danger { background: #ef4444 !important; }
.list-group-item .badge.bg-info { background: #22d3ee !important; }

/* Team cards */
/* Team card */
.team-card { border-color: rgba(148, 163, 184, 0.25) !important; }
[data-theme] .team-card-header { color: var(--ink); }
.team-card-header { background: linear-gradient(180deg, rgba(20,184,166,0.24), rgba(20,184,166,0.12)); color: var(--ink); border-bottom: 1px solid rgba(148, 163, 184, 0.25); padding-top: 0.4rem !important; padding-bottom: 0.4rem !important; }
[data-theme="dark"] .team-card-header { color: #e2e8f0; }

/* Mobile bottom tab bar */
.mobile-tabbar {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: rgba(15, 23, 42, 0.86);
  backdrop-filter: blur(8px);
  border-top: 1px solid rgba(148,163,184,0.18);
  z-index: 1030;
}
.mobile-tabbar .nav {
  display: flex;
  justify-content: space-around;
  padding: 8px 10px;
}
.mobile-tabbar a {
  color: #e2e8f0;
  text-decoration: none;
  font-size: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.mobile-tabbar a .bi { font-size: 20px; margin-bottom: 2px; }
.mobile-tabbar a.active, .mobile-tabbar a:active, .mobile-tabbar a:hover { color: #86efac; }

/* Spacing for bottom nav */
@media (max-width: 767.98px) {
  .container { padding-bottom: 72px; }
}

/* Utility */
.text-muted { color: var(--muted) !important; }
.fw-semibold { font-weight: 600; }

/* Icon button for theme toggle */
.theme-toggle.btn {
  border-color: rgba(226,232,240,0.35) !important;
  color: #e2e8f0;
}
[data-theme="light"] .theme-toggle.btn {
  color: #0f172a;
  border-color: rgba(15,23,42,0.25) !important;
}

/* Icon-only subtle action */
.icon-btn {
  --size: 32px;
  width: var(--size); height: var(--size);
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 999px; border: 1px solid rgba(148,163,184,0.35);
  color: var(--muted); background: transparent;
  position: relative; z-index: 2; /* ensure above stretched-link overlay */
}
.stretched-link::after { z-index: 0 !important; }
.icon-btn:hover { color: #ef4444; border-color: rgba(239,68,68,0.5); background: rgba(239,68,68,0.08); }

/* Tables themed */
.table { color: var(--ink); }
.table thead, .table-light { background: rgba(148,163,184,0.12) !important; color: var(--ink); }
.table-striped > tbody > tr:nth-of-type(odd) { background: rgba(148,163,184,0.08); }
.table > :not(caption) > * > * { border-color: rgba(148,163,184,0.25); }

/* Dark-mode table refinements */
[data-theme="dark"] .table { background: var(--card); color: var(--ink); }
[data-theme="dark"] .table, 
[data-theme="dark"] .table tbody, 
[data-theme="dark"] .table tr, 
[data-theme="dark"] .table td, 
[data-theme="dark"] .table th { background-color: var(--card) !important; color: var(--ink) !important; }
[data-theme="dark"] .table {
  /* Bootstrap table CSS variables for dark theme */
  --bs-table-bg: var(--card);
  --bs-table-color: var(--ink);
  --bs-table-striped-bg: rgba(255,255,255,0.04);
  --bs-table-striped-color: var(--ink);
  --bs-table-hover-bg: rgba(255,255,255,0.06);
  --bs-table-border-color: rgba(226,232,240,0.12);
}
[data-theme="dark"] .table > :not(caption) > * > * {
  background-color: var(--bs-table-bg) !important;
  color: var(--bs-table-color) !important;
}
[data-theme="dark"] .table-striped > tbody > tr:nth-of-type(odd) > * {
  background-color: var(--bs-table-striped-bg) !important;
  color: var(--bs-table-striped-color) !important;
}
[data-theme="dark"] .table-hover > tbody > tr:hover > * {
  background-color: var(--bs-table-hover-bg) !important;
}
[data-theme="dark"] .table thead,
[data-theme="dark"] .table-light { background: rgba(255,255,255,0.06) !important; color: var(--ink); }
[data-theme="dark"] .table-striped > tbody > tr:nth-of-type(odd) { background: rgba(255,255,255,0.04); }
[data-theme="dark"] .table-hover tbody tr:hover { background: rgba(255,255,255,0.06); }
[data-theme="dark"] .table > :not(caption) > * > * { border-color: rgba(226,232,240,0.12); }

/* Bootstrap overrides to respect theme */
.bg-light { background-color: var(--card) !important; }
.bg-dark { background-color: rgba(15,23,42,0.9) !important; }

/* Navbar text color fix for light theme glass bar */
[data-theme="light"] .navbar.glass.navbar-dark .navbar-brand,
[data-theme="light"] .navbar.glass.navbar-dark .nav-link,
[data-theme="light"] .navbar.glass.navbar-dark .navbar-text { color: #0f172a !important; }

/* Ensure dark tables render dark even within cards */
[data-theme="dark"] .card .table { background-color: var(--card) !important; }
[data-theme="dark"] .card .table tbody tr > * { background-color: var(--card) !important; color: var(--ink) !important; }

/* Force dark header for card headers using bg-dark */
.card .card-header.bg-dark { background-color: rgba(15,23,42,0.9) !important; color: #e2e8f0 !important; }
